<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="initial comments table" author="Vladimir">
        <insert tableName="COMMENTS">
            <column name="ID" valueNumeric="nextval('COMMENT_SEQ')"/>
            <column name="POST_ID" valueComputed="(SELECT ID FROM POSTS WHERE HEADER = 'Заголовок1')"/>
            <column name="USER_ID" valueComputed="(SELECT ID FROM USERS WHERE LOGIN = 'User1')"/>
            <column name="CONTENT" value="Коммент 1"/>
            <column name="DATE" value="2019-07-17 03:11:55+03"/>
            <column name="DELETED" value="false"/>
        </insert>
        <insert tableName="COMMENTS">
            <column name="ID" valueNumeric="nextval('COMMENT_SEQ')"/>
            <column name="POST_ID" valueComputed="(SELECT ID FROM POSTS WHERE HEADER = 'Заголовок1')"/>
            <column name="USER_ID" valueComputed="(SELECT ID FROM USERS WHERE LOGIN = 'User1')"/>
            <column name="CONTENT" value="Коммент 2"/>
            <column name="DATE" value="2019-07-17 03:12:55+03"/>
            <column name="DELETED" value="false"/>
        </insert>
        <insert tableName="COMMENTS">
            <column name="ID" valueNumeric="nextval('COMMENT_SEQ')"/>
            <column name="PARENT_ID" valueComputed="(SELECT ID FROM COMMENTS WHERE CONTENT = 'Коммент 1')"/>
            <column name="POST_ID" valueComputed="(SELECT ID FROM POSTS WHERE HEADER = 'Заголовок1')"/>
            <column name="USER_ID" valueComputed="(SELECT ID FROM USERS WHERE LOGIN = 'User2')"/>
            <column name="CONTENT" value="Коммент 1-1"/>
            <column name="DATE" value="2019-07-17 03:13:55+03"/>
            <column name="DELETED" value="false"/>
        </insert>
        <insert tableName="COMMENTS">
            <column name="ID" valueNumeric="nextval('COMMENT_SEQ')"/>
            <column name="POST_ID" valueComputed="(SELECT ID FROM POSTS WHERE HEADER = 'Заголовок 5: длиннопост?')"/>
            <column name="USER_ID" valueComputed="(SELECT ID FROM USERS WHERE LOGIN = 'User1')"/>
            <column name="CONTENT" value="Это просто то что надо!"/>
            <column name="DATE" value="2019-07-17 03:14:55+03"/>
            <column name="DELETED" value="false"/>
        </insert>
        <insert tableName="COMMENTS">
            <column name="ID" valueNumeric="nextval('COMMENT_SEQ')"/>
            <column name="PARENT_ID"
                    valueComputed="(SELECT ID FROM COMMENTS WHERE CONTENT = 'Это просто то что надо!')"/>
            <column name="POST_ID" valueComputed="(SELECT ID FROM POSTS WHERE HEADER = 'Заголовок 5: длиннопост?')"/>
            <column name="USER_ID" valueComputed="(SELECT ID FROM USERS WHERE LOGIN = 'User1')"/>
            <column name="CONTENT" value="Согласен! Самый крутой пост в этом блоге!"/>
            <column name="DATE" value="2019-07-17 03:15:55+03"/>
            <column name="DELETED" value="false"/>
        </insert>
        <insert tableName="COMMENTS">
            <column name="ID" valueNumeric="nextval('COMMENT_SEQ')"/>
            <column name="PARENT_ID"
                    valueComputed="(SELECT ID FROM COMMENTS WHERE CONTENT = 'Согласен! Самый крутой пост в этом блоге!')"/>
            <column name="POST_ID"
                    valueComputed="(SELECT ID FROM POSTS WHERE HEADER = 'Заголовок 5: длиннопост?')"/>
            <column name="USER_ID" valueComputed="(SELECT ID FROM USERS WHERE LOGIN = 'User3')"/>
            <column name="CONTENT" value="Сам себя не похвалишь, никто не похвалит)"/>
            <column name="DATE" value="2019-07-17 03:16:55+03"/>
            <column name="DELETED" value="false"/>
        </insert>
        <insert tableName="COMMENTS">
            <column name="ID" valueNumeric="nextval('COMMENT_SEQ')"/>
            <column name="POST_ID" valueComputed="(SELECT ID FROM POSTS WHERE HEADER = 'Заголовок 5: длиннопост?')"/>
            <column name="USER_ID" valueComputed="(SELECT ID FROM USERS WHERE LOGIN = 'User2')"/>
            <column name="CONTENT" value="Чётко и по делу. Спасибо! Скорей бы лайки ввели, я бы сразу два поставил)"/>
            <column name="DATE" value="2019-07-17 03:16:51+03"/>
            <column name="DELETED" value="false"/>
        </insert>
    </changeSet>
</databaseChangeLog>